name: Deploy to Render

on:
  push:
    branches: [ master ]
  workflow_run:
    workflows: ["CI"]
    types:
      - completed

jobs:
  deploy:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    if: ${{ github.event.workflow_run.conclusion == 'success' || github.event_name == 'push' }}

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Deploy to Render
      run: |
        echo "ðŸš€ Triggering Render deployment..."
        echo "Note: Auto-deploy should be enabled in Render dashboard"
        echo "If not working, check webhook in GitHub Settings > Webhooks"
        echo "Or manually deploy from Render dashboard"

        # Optional: Add curl to trigger Render webhook if configured
        # curl -X POST -H "Content-Type: application/json" \
        #   -d '{"ref": "'"$GITHUB_SHA"'"}' \
        #   YOUR_RENDER_WEBHOOK_URL

        echo "âœ… Deployment triggered (via Render auto-deploy webhook)"
